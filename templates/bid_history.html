{{define "title"}}Bid History{{end}}

{{define "content"}}
<h2>Bid History</h2>

<form method="GET" action="/bids/history" class="filter-bar">
    <select name="league_id" onchange="this.form.submit()">
        <option value="">All Leagues</option>
        {{range .Leagues}}
            <option value="{{.ID}}" {{if eq .ID $.LeagueID}}selected{{end}}>{{.Name}}</option>
        {{end}}
    </select>

    <select name="team_id" onchange="this.form.submit()">
        <option value="">All Teams</option>
        {{range .Leagues}}
            {{range .Teams}}
                <option value="{{.ID}}" {{if eq .ID $.TeamID}}selected{{end}}>{{.Name}}</option>
            {{end}}
        {{end}}
    </select>
</form>

{{if .BidRecords}}
<div class="table-container">
    <table class="fantasy-table-base">
        <thead>
            <tr>
                <th>Player</th>
                <th>League</th>
                <th>Team</th>
                <th>Bid Points</th>
                <th>Years</th>
                <th>AAV</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {{range .BidRecords}}
            <tr>
                <td><a href="/player/{{.PlayerID}}">{{.PlayerName}}</a></td>
                <td>{{.LeagueName}}</td>
                <td>{{.TeamName}}</td>
                <td>{{printf "%.2f" .Amount}}</td>
                <td>{{.Years}}</td>
                <td>${{formatMoney .AAV}}</td>
                <td>{{.BidDate}}</td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
{{else}}
<p style="padding: 20px; color: #888;">No bid history found for the selected filters.</p>
{{end}}

<style>
    .filter-bar { display: flex; gap: 10px; margin-bottom: 20px; }
    .filter-bar select { padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; }
    .table-container { overflow-x: auto; }
</style>
{{end}}
