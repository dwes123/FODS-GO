{{define "title"}}Commissioner Queue{{end}}

{{define "content"}}
<h2>Commissioner Dashboard</h2>

<div class="admin-tools-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid var(--fod-blue-primary);">
        <h3>Master Tools</h3>
        <p>Edit player data, assignments, and contracts.</p>
        <a href="/admin/player-editor" class="button button-small">Player Editor</a>
        <a href="/admin/player-assign" class="button button-small" style="margin-top: 5px;">Manual Assign</a>
    </div>
    
    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid var(--fod-orange-accent);">
        <h3>Financials</h3>
        <p>Dead Cap adjustments and ISBP.</p>
        <a href="/admin/dead-cap/" class="button button-small">Financial Admin</a>
        <a href="/admin/balance-editor" class="button button-small" style="margin-top: 5px;">ISBP / MiLB Balances</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #5cb85c;">
        <h3>Imports & Review</h3>
        <p>Bulk updates and trade approval.</p>
        <a href="/admin/csv-import" class="button button-small">CSV Importer</a>
        <a href="/admin/trades" class="button button-small" style="margin-top: 5px; background: #5bc0de;">Trade Queue</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #d9534f;">
        <h3>Account Approvals</h3>
        <p>Review and approve pending user registrations.</p>
        <a href="/admin/approvals" class="button button-small">Approval Queue</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #28a745;">
        <h3>Player Requests</h3>
        <p>Review player add requests from team owners.</p>
        <a href="/admin/player-requests" class="button button-small">Player Requests</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #6f42c1;">
        <h3>League Settings</h3>
        <p>Trade deadlines, opening day, luxury tax.</p>
        <a href="/admin/settings" class="button button-small">Settings</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #fd7e14;">
        <h3>Waiver Audit</h3>
        <p>View all players on waivers, time remaining, and claims.</p>
        <a href="/admin/waiver-audit" class="button button-small">Waiver Audit</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #17a2b8;">
        <h3>Role Management</h3>
        <p>Manage commissioner assignments and user roles.</p>
        <a href="/admin/roles" class="button button-small">Manage Roles</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #0dcaf0;">
        <h3>Team & User Management</h3>
        <p>Add/remove team owners, create and delete users.</p>
        <a href="/admin/team-owners" class="button button-small">Manage Owners</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #e83e8c;">
        <h3>Fantrax Queue</h3>
        <p>Track roster moves synced to Fantrax.</p>
        <a href="/admin/fantrax-queue" class="button button-small">Fantrax Queue</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #6610f2;">
        <h3>AI Assistant</h3>
        <p>Chat-based agent for player moves, queries, and league management.</p>
        <a href="/admin/agent" class="button button-small" style="background: #6610f2;">Open AI Agent</a>
    </div>

    <div class="tool-card" style="background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; border-top: 4px solid #20c997;">
        <h3>Power Tools</h3>
        <p>Bid exports and more.</p>
        <a href="/admin/export-bids" class="button button-small">Export Bids CSV</a>
    </div>
</div>

<h3>Pending Actions</h3>
{{if .Actions}}
<table class="fantasy-table-base">
    <thead>
        <tr>
            <th>Type</th>
            <th>Player</th>
            <th>Team</th>
            <th>Details</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {{range .Actions}}
        <tr>
            <td>{{.ActionType}}</td>
            <td><strong>{{.PlayerName}}</strong></td>
            <td>{{.TeamName}}</td>
            <td>{{if .Summary}}{{.Summary}}{{else if .TargetYear}}Year: {{.TargetYear}} â€” ${{formatMoney .SalaryAmount}}{{end}}</td>
            <td>
                <form action="/admin/process" method="POST" style="display: inline;">
                    <input type="hidden" name="action_id" value="{{.ID}}">
                    <button type="submit" name="status" value="APPROVED" class="button">Approve</button>
                    <button type="submit" name="status" value="REJECTED" class="button button-danger">Reject</button>
                </form>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
{{else}}
<p>No pending actions requiring approval.</p>
{{end}}

<style>
    .button-danger { background-color: #dc3545; border-color: #dc3545; }
</style>
{{end}}
