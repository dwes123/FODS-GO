{{define "title"}}Hitting Leaderboard{{end}}

{{define "content"}}
<h2>Hitting Fantasy Points Leaderboard</h2>

<div class="stats-nav" style="margin-bottom: 16px; display: flex; gap: 8px;">
    <a href="/stats/pitching" class="button" style="background: #6c757d; padding: 6px 16px; font-size: 0.9rem;">Pitching</a>
    <a href="/stats/hitting" class="button" style="padding: 6px 16px; font-size: 0.9rem;">Hitting</a>
</div>

<form method="GET" action="/stats/hitting" class="filter-bar">
    <select name="league" onchange="this.form.submit()">
        <option value="">All Leagues</option>
        {{range .Leagues}}
            <option value="{{.ID}}" {{if eq .ID $.SelectedLeague}}selected{{end}}>{{.Name}}</option>
        {{end}}
    </select>

    <label style="display:flex; align-items:center; gap:4px;">
        From: <input type="date" name="start" value="{{.StartDate}}" onchange="this.form.submit()" style="padding:6px 10px; border:1px solid #ccc; border-radius:4px;">
    </label>
    <label style="display:flex; align-items:center; gap:4px;">
        To: <input type="date" name="end" value="{{.EndDate}}" onchange="this.form.submit()" style="padding:6px 10px; border:1px solid #ccc; border-radius:4px;">
    </label>
</form>

<details style="margin-bottom: 20px;">
    <summary style="cursor:pointer; color: var(--fod-blue-primary, #2E6DA4); font-weight:600;">Scoring Reference</summary>
    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 10px;">
        <table class="fantasy-table-base" style="width: auto;">
            <thead><tr><th>Stat</th><th>Pts</th></tr></thead>
            <tbody>
                {{range .Categories}}
                {{if .IsActive}}
                <tr>
                    <td>{{.DisplayName}}</td>
                    <td style="{{if lt .Points 0.0}}color:#d9534f{{else}}color:#5cb85c{{end}}">
                        {{if gt .Points 0.0}}+{{end}}{{printf "%.1f" .Points}}
                    </td>
                </tr>
                {{end}}
                {{end}}
            </tbody>
        </table>
    </div>
</details>

{{if .Leaders}}
<div class="table-container">
    <table class="fantasy-table-base">
        <thead>
            <tr>
                <th>#</th>
                <th>Player</th>
                <th>Pos</th>
                <th>Team</th>
                <th>League</th>
                <th>GP</th>
                <th style="font-weight:bold; color: var(--fod-orange-accent, #E87426);">Total Pts</th>
                <th>Avg Pts</th>
                <th>H</th>
                <th>HR</th>
                <th>RBI</th>
                <th>R</th>
                <th>BB</th>
                <th>SB</th>
                <th>K</th>
                <th>CS</th>
            </tr>
        </thead>
        <tbody class="ranked-tbody">
            {{range $i, $e := .Leaders}}
            <tr>
                <td class="rank-cell"></td>
                <td><a href="/player/{{$e.PlayerID}}">{{$e.PlayerName}}</a></td>
                <td>{{$e.Position}}</td>
                <td>{{$e.TeamName}}</td>
                <td>{{$e.LeagueName}}</td>
                <td>{{$e.GamesPlayed}}</td>
                <td style="font-weight:bold;">{{printf "%.1f" $e.TotalPoints}}</td>
                <td>{{printf "%.2f" $e.AvgPoints}}</td>
                <td>{{$e.TotalH}}</td>
                <td>{{$e.TotalHR}}</td>
                <td>{{$e.TotalRBI}}</td>
                <td>{{$e.TotalR}}</td>
                <td>{{$e.TotalBB}}</td>
                <td>{{$e.TotalSB}}</td>
                <td>{{$e.TotalK}}</td>
                <td>{{$e.TotalCS}}</td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
{{else}}
<p style="padding: 20px; color: #888;">No hitting stats found for the selected filters. Use the admin backfill tool to process historical dates.</p>
{{end}}

<style>
    .filter-bar { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; align-items: center; }
    .filter-bar select { padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; }
    .table-container { overflow-x: auto; }
    .ranked-tbody { counter-reset: row-num; }
    .ranked-tbody tr { counter-increment: row-num; }
    .rank-cell::before { content: counter(row-num); }
</style>
{{end}}
