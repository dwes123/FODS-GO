{{define "title"}}My Profile{{end}}

{{define "content"}}
<div class="profile-container">
    <h2>User Profile</h2>
    <div class="profile-card">
        <p><strong>Username:</strong> {{.User.Username}}</p>
        <p><strong>Email:</strong> {{.User.Email}}</p>
        <p><strong>Role:</strong> {{.User.Role}}</p>
    </div>

    <h3>Security</h3>
    <div class="profile-card">
        <form action="/profile/update-password" method="POST">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                <div class="form-group">
                    <label>New Password:</label>
                    <input type="password" name="new_password" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                </div>
                <div class="form-group">
                    <label>Confirm Password:</label>
                    <input type="password" name="confirm_password" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                </div>
            </div>
            <button type="submit" class="button">Update Password</button>
        </form>
    </div>

    <h3>My Managed Teams</h3>
    {{if .MyTeams}}
        <div class="team-list">
            {{range .MyTeams}}
            <div class="team-card managed">
                <h4>{{.Name}}</h4>
                <p>Owner: {{.Owner}}</p>
                <a href="/roster/{{.ID}}" class="button">Manage Roster</a>
            </div>
            {{end}}
        </div>
    {{else}}
        <p>You do not manage any teams yet.</p>
    {{end}}

    <h3>Claim a Team</h3>
    <p>Select a team below to link it to your account.</p>
    
    {{if .AvailableTeams}}
    <form action="/claim-team" method="POST" class="claim-form">
        <div class="form-group">
            <label for="team_id">Select Team:</label>
            <select name="team_id" id="team_id" required>
                <option value="">-- Choose a Team --</option>
                {{range .AvailableTeams}}
                <option value="{{.ID}}">{{.Name}}</option>
                {{end}}
            </select>
        </div>
        <button type="submit" class="button">Claim Team</button>
    </form>
    {{else}}
        <p class="notice-success">All teams have been claimed!</p>
    {{end}}
</div>

<style>
    .profile-container { max-width: 800px; margin: 0 auto; }
    .profile-card { background: white; padding: 20px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 30px; }
    
    .team-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .team-card { background: white; padding: 20px; border-radius: 8px; border: 1px solid #ddd; }
    .team-card.managed { border-left: 5px solid var(--fod-success-green); }
    
    .claim-form { background: var(--fod-gray-light); padding: 20px; border-radius: 8px; display: flex; gap: 10px; align-items: flex-end; }
    .form-group { flex-grow: 1; }
    .form-group select { width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #ccc; }
</style>
{{end}}
